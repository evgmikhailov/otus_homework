
# Домашнее задание № 09 
## Задача:
 Написать скрипт для CRON, который раз в час будет формировать письмо и отправлять на заданную почту.

Необходимая информация в письме:

Список IP адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта;
Список запрашиваемых URL (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта;
Ошибки веб-сервера/приложения c момента последнего запуска;
Список всех кодов HTTP ответа с указанием их кол-ва с момента последнего запуска скрипта.
Скрипт должен предотвращать одновременный запуск нескольких копий, до его завершения.

В письме должен быть прописан обрабатываемый временной диапазон.

Реализовано в скрипте, log_analyzer.sh, предварительно для работы с почтой установлен mailutils (apt install mailutils) и установлен и настроен на работу с Gmail и 2FA клиент msmtp

## Листинг скрипта с пояснениями 


 Этот скрипт анализирует логи веб-сервера и отправляет отчет по email.
 Основные функции:
 - Анализ логов за период с последнего запуска
 - Вывод статистики по IP-адресам, URL, ошибкам и кодам ответа
 - Защита от множественного запуска
 - Автоматическое определение временного диапазона

## Конфигурация:
 1. Указываем путь к лог-файлу в переменной LOG_FILE
 2. Задаем email для отчетов в REPORT_EMAIL (я свой из репозитория убрал, ниже будет скрин подтверждение получения письма)
 

## Для использования скрипта нужно:
Сохранить его как /usr/local/bin/log_analyzer.sh
Предварительно создать /tmp/log_analyzer.lock и дать првав на него 666
Сделать исполняемым: chmod +x /usr/local/bin/log_analyzer.sh
Настройте CRON: 0 * * * * /usr/local/bin/log_analyzer.sh

Скрин полученного письма 